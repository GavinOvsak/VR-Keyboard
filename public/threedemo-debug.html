<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8"> 
	<title>vOS Demo</title>
</head>
<body>
<script src="http://162.222.183.103/socket.io/socket.io.js"></script>
<script src="http://162.222.183.103/three.min.js"></script>
<script src="http://162.222.183.103/jquery-1.10.1.min.js"></script>
<script src="http://162.222.183.103/utility.js"></script>
<div id="code"></div>
<div id="ThreeJS"></div>
<script>
var scene = new THREE.Scene();
var WIDTH = window.innerWidth, HEIGHT = window.innerHeight;
var VIEW_ANGLE = 45, ASPECT = WIDTH / HEIGHT, NEAR = 0.1, FAR = 20000;
camera = new THREE.PerspectiveCamera( VIEW_ANGLE, ASPECT, NEAR, FAR);
scene.add(camera);
camera.position.set(0,150,400);
camera.lookAt(scene.position);        

renderer = new THREE.WebGLRenderer( {antialias:true} );
renderer.setSize(WIDTH, HEIGHT);

container = document.getElementById( 'ThreeJS' );
container.appendChild( renderer.domElement );

var camera = new THREE.PerspectiveCamera(VIEW_ANGLE, ASPECT, NEAR, FAR);

camera.position.z = 300;

$('#container').mousemove(function(event) {
	camera.position.x = -1 * (event.pageX - 300) / 30;
	camera.position.y = (event.pageY - 200) / 30;
});
/*
var pointLight = new THREE.PointLight(0xFFFFFF);

pointLight.position.x = 50;
pointLight.position.y = 50;
pointLight.position.z = 300;

var directLight = new THREE.DirectionalLight(0xFFFFFF);

directLight.position.x = 0;
directLight.position.y = 0;
directLight.position.z = 1;
*/
/*var render = function() {
	window.requestAnimationFrame(render);

	scene = new THREE.Scene();

	scene.add(camera);
	scene.add(directLight);
	init(scene);
	renderer.render(scene, camera);
};*/

//render();

init(scene);
renderer.render(scene, camera);

animate();
function animate() 
{
    requestAnimationFrame( animate );
	renderer.render( scene, camera );
}


// FUNCTIONS                 
function init(scene) 
{
    var light = new THREE.PointLight(0xffffff);
    light.position.set(0,150,100);
    scene.add(light);

    var floorTexture = new THREE.ImageUtils.loadTexture( 'images/checkerboard.jpg' );
    floorTexture.wrapS = floorTexture.wrapT = THREE.RepeatWrapping; 
    floorTexture.repeat.set( 10, 10 );
    var floorMaterial = new THREE.MeshBasicMaterial( { map: floorTexture, side: THREE.DoubleSide } );
    var floorGeometry = new THREE.PlaneGeometry(1000, 1000, 10, 10);
    var floor = new THREE.Mesh(floorGeometry, floorMaterial);
    floor.position.y = -0.5;
    floor.rotation.x = Math.PI / 2;
    scene.add(floor);

    var skyBoxGeometry = new THREE.CubeGeometry( 10000, 10000, 10000 );
    var skyBoxMaterial = new THREE.MeshBasicMaterial( { color: 0x9999ff, side: THREE.BackSide } );
    var skyBox = new THREE.Mesh( skyBoxGeometry, skyBoxMaterial );
    scene.add(skyBox);
    scene.fog = new THREE.FogExp2( 0x9999ff, 0.00025 );
    
    var sphereGeom =  new THREE.SphereGeometry( 40, 32, 16 ); 
    
    var light2 = new THREE.AmbientLight(0x444444);
    scene.add(light2);
    
    var moonTexture = THREE.ImageUtils.loadTexture( 'images/moon.jpg' );
    var moonMaterial = new THREE.MeshBasicMaterial( { map: moonTexture } );
    var moon = new THREE.Mesh( sphereGeom.clone(), moonMaterial );
    moon.position.set(-100, 50, 0);
    scene.add( moon );        
    
    var moonTexture = THREE.ImageUtils.loadTexture( 'images/moon.jpg' );
    var moonMaterial = new THREE.MeshLambertMaterial( { map: moonTexture } );
    var moon = new THREE.Mesh( sphereGeom.clone(), moonMaterial );
    moon.position.set(0, 50, 0);
    scene.add( moon );                
    
    var moonTexture = THREE.ImageUtils.loadTexture( 'images/moon.jpg' );
    var moonMaterial = new THREE.MeshLambertMaterial( { map: moonTexture, color: 0xff8800, ambient: 0x0000ff } );
    var moon = new THREE.Mesh( sphereGeom.clone(), moonMaterial );
    moon.position.set(100, 50, 0);
    scene.add( moon );        
    
    var lightbulb = new THREE.Mesh( 
            new THREE.SphereGeometry( 10, 16, 8 ), 
            new THREE.MeshBasicMaterial( { color: 0xffaa00 } )
    );
    scene.add( lightbulb );
    lightbulb.position = light.position;
            
    var cubeGeometry = new THREE.CubeGeometry( 85, 85, 85 );
    
    var crateTexture = new THREE.ImageUtils.loadTexture( 'images/crate.gif' );
    var crateMaterial = new THREE.MeshBasicMaterial( { map: crateTexture } );
    var crate = new THREE.Mesh( cubeGeometry.clone(), crateMaterial );
    crate.position.set(-60, 50, -100);
    scene.add( crate );                
    
    var materialArray = [];
    materialArray.push(new THREE.MeshBasicMaterial( { map: THREE.ImageUtils.loadTexture( 'images/Dice-Blue-1.png' ) }));
    materialArray.push(new THREE.MeshBasicMaterial( { map: THREE.ImageUtils.loadTexture( 'images/Dice-Blue-6.png' ) }));
    materialArray.push(new THREE.MeshBasicMaterial( { map: THREE.ImageUtils.loadTexture( 'images/Dice-Blue-2.png' ) }));
    materialArray.push(new THREE.MeshBasicMaterial( { map: THREE.ImageUtils.loadTexture( 'images/Dice-Blue-5.png' ) }));
    materialArray.push(new THREE.MeshBasicMaterial( { map: THREE.ImageUtils.loadTexture( 'images/Dice-Blue-3.png' ) }));
    materialArray.push(new THREE.MeshBasicMaterial( { map: THREE.ImageUtils.loadTexture( 'images/Dice-Blue-4.png' ) }));
    var DiceBlueMaterial = new THREE.MeshFaceMaterial(materialArray);
    
    var DiceBlueGeom = new THREE.CubeGeometry( 85, 85, 85, 1, 1, 1 );
    var DiceBlue = new THREE.Mesh( DiceBlueGeom, DiceBlueMaterial );
    DiceBlue.position.set(60, 50, -100);
    scene.add( DiceBlue );        
}

</script>
</body>
</html>